(function(e){function t(t){for(var o,s,a=t[0],c=t[1],u=t[2],l=0,d=[];l<a.length;l++)s=a[l],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&d.push(i[s][0]),i[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);f&&f(t);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(o=!1)}o&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},i={main:0},r=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/tasty-twitter/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var f=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("f5cc")},"05d6":function(e,t,n){"use strict";n("d3b7");var o=n("970b"),i=n("5bc3");Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationConfigRepositoryLocal=void 0;var r=n("2dc3"),s=n("182a"),a=function(){function e(t){o(this,e),this._storage=t,this._config=new r.ReplaySubject(1),this._initConfig()}return i(e,[{key:"config$",get:function(){return this._config}},{key:"changeConfig",value:function(e){var t=this;return new Promise((function(n){t._config.next(e),t._saveConfig(e),n()}))}},{key:"_initConfig",value:function(){var e=this._storage.getItem(s.APPLICATION_CONFIG_KEY);e?this._config.next(JSON.parse(e)):this._config.next(s.DEFAULT_CONFIG)}},{key:"_saveConfig",value:function(e){this._storage.setItem(s.APPLICATION_CONFIG_KEY,JSON.stringify(e))}}]),e}();t.ApplicationConfigRepositoryLocal=a},1239:function(e,t,n){},"182a":function(e,t,n){"use strict";n.r(t),n.d(t,"APPLICATION_CONFIG_KEY",(function(){return o})),n.d(t,"DEFAULT_CONFIG",(function(){return i}));var o="TT_APPLICATION_CONFIG",i={darkTheme:!1}},"19d5":function(e,t,n){"use strict";n("4de4"),n("d81d"),n("fb6a"),n("a434"),n("e439"),n("498a");var o=n("970b"),i=n("5bc3"),r=n("7037"),s=this&&this.__decorate||function(e,t,n,o){var i,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"===typeof Reflect?"undefined":r(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(s<3?i(a):s>3?i(t,n,a):i(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MostDiscussedPostFeedService=void 0;var c=n("7b7f"),u=n("deac"),f=n("61f4"),l=n("d0e4"),d=function(){function e(t){o(this,e),this._postRepository=t}return i(e,[{key:"mostDiscussedPostViews$",get:function(){return this._postRepository.postViews$.pipe(f.map((function(e){return e.filter((function(e){var t=e.comments;return t.length>0})).sort((function(e,t){return t.comments.length-e.comments.length})).splice(0,3).map((function(e){return{id:e.id,content:e.content.length<l.MAX_CONTENT_LENGTH?e.content:e.content.slice(0,l.MAX_CONTENT_LENGTH).trim()+"...",commentsCount:e.comments.length}}))})))}}]),e}();d=s([c.injectable(),a(0,c.inject(u.IPostsRepositoryToken))],d),t.MostDiscussedPostFeedService=d},2025:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n("aea0"),t)},"20de":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return C}));var o="IPostsRepository",i=(n("99af"),n("4de4"),n("4160"),n("d81d"),n("4ec9"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("2909")),r=n("15fd"),s=n("5530"),a=n("3835"),c=n("d4ec"),u=n("bee2"),f=n("0f9e"),l=n("2e21"),d=n("deb8"),p=(n("ac1f"),n("5319"),n("498a"),n("32b8")),v=n("b3fe"),m={avatar:p["image"].people(100,100),fullname:"Random Man"},_="TT_POSTS_LIST",h="TT_COMMENTS_LIST",b=function(){return{avatar:p["image"].people(100,100)+"?q=".concat(Object(v["a"])()),fullname:p["name"].firstName()+" "+p["name"].lastName()}},g=function(e){return{postId:e,id:Object(v["a"])(),createDate:(new Date).toISOString(),author:b(),content:Math.random()>.5?p["lorem"].paragraph():p["lorem"].lines()}},O=function(e){var t=/http?s?:?\/\/[^"']*\.(gif|jpe?g|tiff?|png|webp|bmp|svg)/.exec(e.content),n=null===t?null:t[0],o=null===t?e.content.trim():e.content.replace(t[0],"").trim();return{id:Object(v["a"])(),createDate:(new Date).toISOString(),author:m,image:n,content:o}},y=n("7b7f"),P=n("7060"),j=n("260e"),w=n("02a2"),C=function(){function e(t){var n=this;Object(c["a"])(this,e),this._storage=t,this._postViews$=void 0,this._scheduledGenerators=new Map,this._posts$=new l["a"](this._getPosts()),this._comments$=new l["a"](this._getComments()),this._posts$.subscribe((function(e){e.forEach((function(e){var t=e.id;return n._initCommentGenerator(t)}))})),this._posts$.pipe(Object(P["a"])(1)).subscribe((function(e){return n._savePosts(e)})),this._comments$.pipe(Object(P["a"])(1)).subscribe((function(e){return n._saveComments(e)}))}return Object(u["a"])(e,[{key:"postViews$",get:function(){return this._postViews$||(this._postViews$=Object(d["b"])(this._posts$,this._comments$).pipe(Object(j["a"])((function(e){var t=Object(a["a"])(e,2),n=t[0],o=t[1];return n.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{comments:o.filter((function(t){var n=t.postId;return n===e.id})).map((function(e){e.postId;var t=Object(r["a"])(e,["postId"]);return t}))})}))})),Object(w["a"])(1))),this._postViews$}},{key:"createPost",value:function(e){var t=this;return new Promise((function(n){t._posts$.next([O(e)].concat(Object(i["a"])(t._posts$.getValue()))),n()}))}},{key:"_getPosts",value:function(){var e=this._storage.getItem(_);return e?JSON.parse(e):[]}},{key:"_savePosts",value:function(e){this._storage.setItem(_,JSON.stringify(e))}},{key:"_getComments",value:function(){var e=this._storage.getItem(h);return e?JSON.parse(e):[]}},{key:"_saveComments",value:function(e){this._storage.setItem(h,JSON.stringify(e))}},{key:"_initCommentGenerator",value:function(e){this._scheduledGenerators.has(e)||this._scheduleCommentGenerator(e)}},{key:"_scheduleCommentGenerator",value:function(e){var t=this,n=setTimeout((function(){t._comments$.next([g(e)].concat(Object(i["a"])(t._comments$.getValue()))),t._scheduleCommentGenerator(e)}),p["random"].number({min:5e3,max:3e4,precision:5e3}));this._scheduledGenerators.set(e,n)}}]),e}();C=Object(f["a"])([Object(y["injectable"])()],C)},2102:function(e,t,n){"use strict";n("39cf");var o=n("b9c7");n.d(t,"CreatePostForm",(function(){return o["a"]}))},"29b4":function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n("711e"),t);var r=n("19d5");Object.defineProperty(t,"MostDiscussedPostFeedService",{enumerable:!0,get:function(){return r.MostDiscussedPostFeedService}})},"2a04":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"347b":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COMMENTS_LIST_KEY=t.POSTS_LIST_KEY=t.DEFAULT_AUTHOR=void 0;var o=n("32b8");t.DEFAULT_AUTHOR={avatar:o.image.people(100,100),fullname:"Random Man"},t.POSTS_LIST_KEY="TT_POSTS_LIST",t.COMMENTS_LIST_KEY="TT_COMMENTS_LIST"},3564:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n("436a"),t),i(n("d773"),t),i(n("f9fc"),t),i(n("2025"),t)},"39cf":function(e,t){},"3d0c":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CONFIG=t.APPLICATION_CONFIG_KEY=void 0,t.APPLICATION_CONFIG_KEY="TT_APPLICATION_CONFIG",t.DEFAULT_CONFIG={darkTheme:!1}},4314:function(e,t,n){"use strict";n("d3b7");var o=n("970b"),i=n("5bc3");Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationConfigRepositoryLocal=void 0;var r=n("2dc3"),s=n("3d0c"),a=function(){function e(t){o(this,e),this._storage=t,this._config=new r.ReplaySubject(1),this._initConfig()}return i(e,[{key:"config$",get:function(){return this._config}},{key:"changeConfig",value:function(e){var t=this;return new Promise((function(n){t._config.next(e),t._saveConfig(e),n()}))}},{key:"_initConfig",value:function(){var e=this._storage.getItem(s.APPLICATION_CONFIG_KEY);e?this._config.next(JSON.parse(e)):this._config.next(s.DEFAULT_CONFIG)}},{key:"_saveConfig",value:function(e){this._storage.setItem(s.APPLICATION_CONFIG_KEY,JSON.stringify(e))}}]),e}();t.ApplicationConfigRepositoryLocal=a},"436a":function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n("2a04"),t)},"43d6":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n("4de4"),n("d81d"),n("fb6a"),n("a434"),n("498a");var o=n("d4ec"),i=n("bee2"),r=n("0f9e"),s=n("7b7f"),a=n("20de"),c=n("260e"),u=90,f=function(){function e(t){Object(o["a"])(this,e),this._postRepository=t}return Object(i["a"])(e,[{key:"mostDiscussedPostViews$",get:function(){return this._postRepository.postViews$.pipe(Object(c["a"])((function(e){return e.filter((function(e){var t=e.comments;return t.length>0})).sort((function(e,t){return t.comments.length-e.comments.length})).splice(0,3).map((function(e){return{id:e.id,content:e.content.length<u?e.content:e.content.slice(0,u).trim()+"...",commentsCount:e.comments.length}}))})))}}]),e}();f=Object(r["a"])([Object(s["injectable"])(),Object(r["c"])(0,Object(s["inject"])(a["a"]))],f)},"468f":function(e,t,n){},5924:function(e,t,n){"use strict";var o=n("decf");n.o(o,"IMostDiscussedPostFeedServiceToken")&&n.d(t,"IMostDiscussedPostFeedServiceToken",(function(){return o["IMostDiscussedPostFeedServiceToken"]}));var i=n("43d6");n.d(t,"MostDiscussedPostFeedService",(function(){return i["a"]}))},"5aee":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPostFeedServiceToken=void 0,t.IPostFeedServiceToken="IPostFeedService"},"6a54":function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n("9b3a"),t);var r=n("4314");Object.defineProperty(t,"ApplicationConfigRepositoryLocal",{enumerable:!0,get:function(){return r.ApplicationConfigRepositoryLocal}})},"711e":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IMostDiscussedPostFeedServiceToken=void 0,t.IMostDiscussedPostFeedServiceToken="IMostDiscussedPostFeedService"},"756e":function(e,t,n){"use strict";n("b0c0"),n("ac1f"),n("5319"),n("498a"),Object.defineProperty(t,"__esModule",{value:!0}),t.mapToPost=t.generateComment=t.generateAuthor=void 0;var o=n("32b8"),i=n("7bf6"),r=n("347b");t.generateAuthor=function(){return{avatar:o.image.people(100,100)+"?q=".concat(i.v4()),fullname:o.name.firstName()+" "+o.name.lastName()}},t.generateComment=function(e){return{postId:e,id:i.v4(),createDate:(new Date).toISOString(),author:t.generateAuthor(),content:Math.random()>.5?o.lorem.paragraph():o.lorem.lines()}},t.mapToPost=function(e){var t=/http?s?:?\/\/[^"']*\.(gif|jpe?g|tiff?|png|webp|bmp|svg)/.exec(e.content),n=null===t?null:t[0],o=null===t?e.content.trim():e.content.replace(t[0],"").trim();return{id:i.v4(),createDate:(new Date).toISOString(),author:r.DEFAULT_AUTHOR,image:n,content:o}}},"7ba4":function(e,t,n){},"84d6":function(e,t,n){"use strict";n("d81d"),n("fb6a"),n("e439");var o=n("970b"),i=n("5bc3"),r=n("7037"),s=this&&this.__decorate||function(e,t,n,o){var i,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"===typeof Reflect?"undefined":r(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(s<3?i(a):s>3?i(t,n,a):i(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostFeedService=void 0;var c=n("7b7f"),u=n("deac"),f=n("61f4"),l=function(){function e(t){o(this,e),this._postRepository=t}return i(e,[{key:"postViews$",get:function(){return this._postRepository.postViews$.pipe(f.map((function(e){return e.map((function(e){return Object.assign(Object.assign({},e),{comments:e.comments.slice(0,3)})}))})))}},{key:"createPost",value:function(e){return this._postRepository.createPost(e)}}]),e}();l=s([c.injectable(),a(0,c.inject(u.IPostsRepositoryToken))],l),t.PostFeedService=l},"8e0c":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPostsRepositoryToken=void 0,t.IPostsRepositoryToken="IPostsRepository"},"987e":function(e,t,n){"use strict";n("1239")},"9b3a":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IApplicationConfigRepositoryToken=void 0,t.IApplicationConfigRepositoryToken="IApplicationConfigRepository"},a045:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n("5aee"),t);var r=n("84d6");Object.defineProperty(t,"PostFeedService",{enumerable:!0,get:function(){return r.PostFeedService}})},a82a:function(e,t,n){"use strict";n("cdff")},aea0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toLocalDateTime=void 0;var o=n("f611");t.toLocalDateTime=function(e){return o.DateTime.fromISO(e).toLocaleString(o.DateTime.DATETIME_MED)}},af1d:function(e,t,n){"use strict";n("7ba4")},b9c7:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"form",staticClass:"create-post-form",attrs:{disabled:e.submitInProgress},on:{submit:function(t){return t.preventDefault(),e.submitHandler(t)}}},[n("div",{staticClass:"create-post-form--input-area"},[n("v-text-field",{attrs:{rules:e.rules.content,placeholder:"Что происходит?",outlined:""},model:{value:e.model.content,callback:function(t){e.$set(e.model,"content",t)},expression:"model.content"}})],1),n("v-btn",{attrs:{color:"primary",type:"submit","x-large":"",loading:e.submitInProgress}},[e._v(" Поделиться ")])],1)},i=[],r=(n("d3b7"),n("498a"),n("2b0e")),s=r["a"].extend({name:"CreatePostForm",data:function(){return{submitInProgress:!1,model:{content:""},rules:{content:[function(e){return e&&!!e.trim()||"Сообщение обязательно"}]}}},props:{onSubmit:{type:Function,required:!0}},methods:{submitHandler:function(){var e=this,t=this.$refs.form;t.validate()&&(this.submitInProgress=!0,this.onSubmit(this.model).then((function(){e.resetModel(),t.resetValidation()})).catch((function(e){throw e})).finally((function(){e.submitInProgress=!1})))},resetModel:function(){this.model.content=""}}}),a=s,c=(n("987e"),n("2877")),u=n("6544"),f=n.n(u),l=n("8336"),d=n("4bd4"),p=n("8654"),v=Object(c["a"])(a,o,i,!1,null,null,null);t["a"]=v.exports;f()(v,{VBtn:l["a"],VForm:d["a"],VTextField:p["a"]})},cdff:function(e,t,n){},d0e4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_CONTENT_LENGTH=void 0,t.MAX_CONTENT_LENGTH=90},d773:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n("6a54"),t),i(n("deac"),t)},deac:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n("8e0c"),t);var r=n("e423");Object.defineProperty(t,"PostsRepositoryLocal",{enumerable:!0,get:function(){return r.PostsRepositoryLocal}})},decf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IMostDiscussedPostFeedServiceToken=void 0,t.IMostDiscussedPostFeedServiceToken="IMostDiscussedPostFeedService"},e423:function(e,t,n){"use strict";n("a4d3"),n("99af"),n("4de4"),n("4160"),n("c975"),n("d81d"),n("4ec9"),n("e439"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0");var o=n("448a"),i=n("278c"),r=n("970b"),s=n("5bc3"),a=n("7037"),c=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"===typeof Reflect?"undefined":a(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},u=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.PostsRepositoryLocal=void 0;var f=n("2dc3"),l=n("756e"),d=n("7b7f"),p=n("61f4"),v=n("347b"),m=n("32b8"),_=function(){function e(t){var n=this;r(this,e),this._storage=t,this._postViews$=void 0,this._scheduledGenerators=new Map,this._posts$=new f.BehaviorSubject(this._getPosts()),this._comments$=new f.BehaviorSubject(this._getComments()),this._posts$.subscribe((function(e){e.forEach((function(e){var t=e.id;return n._initCommentGenerator(t)}))})),this._posts$.pipe(p.skip(1)).subscribe((function(e){return n._savePosts(e)})),this._comments$.pipe(p.skip(1)).subscribe((function(e){return n._saveComments(e)}))}return s(e,[{key:"postViews$",get:function(){return this._postViews$||(this._postViews$=f.combineLatest(this._posts$,this._comments$).pipe(p.map((function(e){var t=i(e,2),n=t[0],o=t[1];return n.map((function(e){return Object.assign(Object.assign({},e),{comments:o.filter((function(t){var n=t.postId;return n===e.id})).map((function(e){e.postId;var t=u(e,["postId"]);return t}))})}))})),p.shareReplay(1))),this._postViews$}},{key:"createPost",value:function(e){var t=this;return new Promise((function(n){t._posts$.next([l.mapToPost(e)].concat(o(t._posts$.getValue()))),n()}))}},{key:"_getPosts",value:function(){var e=this._storage.getItem(v.POSTS_LIST_KEY);return e?JSON.parse(e):[]}},{key:"_savePosts",value:function(e){this._storage.setItem(v.POSTS_LIST_KEY,JSON.stringify(e))}},{key:"_getComments",value:function(){var e=this._storage.getItem(v.COMMENTS_LIST_KEY);return e?JSON.parse(e):[]}},{key:"_saveComments",value:function(e){this._storage.setItem(v.COMMENTS_LIST_KEY,JSON.stringify(e))}},{key:"_initCommentGenerator",value:function(e){this._scheduledGenerators.has(e)||this._scheduleCommentGenerator(e)}},{key:"_scheduleCommentGenerator",value:function(e){var t=this,n=setTimeout((function(){t._comments$.next([l.generateComment(e)].concat(o(t._comments$.getValue()))),t._scheduleCommentGenerator(e)}),m.random.number({min:5e3,max:3e4,precision:5e3}));this._scheduledGenerators.set(e,n)}}]),e}();_=c([d.injectable()],_),t.PostsRepositoryLocal=_},e469:function(e,t,n){"use strict";n("468f")},f5cc:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("ab33");var o=n("7b7f"),i=n("20de"),r="IPostFeedService",s=(n("d81d"),n("fb6a"),n("5530")),a=n("d4ec"),c=n("bee2"),u=n("0f9e"),f=n("260e"),l=function(){function e(t){Object(a["a"])(this,e),this._postRepository=t}return Object(c["a"])(e,[{key:"postViews$",get:function(){return this._postRepository.postViews$.pipe(Object(f["a"])((function(e){return e.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{comments:e.comments.slice(0,3)})}))})))}},{key:"createPost",value:function(e){return this._postRepository.createPost(e)}}]),e}();l=Object(u["a"])([Object(o["injectable"])(),Object(u["c"])(0,Object(o["inject"])(i["a"]))],l);var d=n("5924"),p="IApplicationConfigRepository",v=n("05d6"),m=o["container"].createChildContainer();m.register(i["a"],{useFactory:Object(o["instanceCachingFactory"])((function(){return new i["b"](window.localStorage)}))}),m.register(p,{useFactory:Object(o["instanceCachingFactory"])((function(){return new v["ApplicationConfigRepositoryLocal"](window.localStorage)}))}),m.register(r,{useFactory:Object(o["instanceCachingFactory"])((function(e){return e.resolve(l)}))}),m.register(d["IMostDiscussedPostFeedServiceToken"],{useFactory:Object(o["instanceCachingFactory"])((function(e){return e.resolve(d["MostDiscussedPostFeedService"])}))});var _=m,h=n("3564"),b=n("2b0e"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-main",[n("v-container",[n("div",[n("v-btn",{staticClass:"mx-2",attrs:{icon:"",raised:"",large:""},on:{click:e.toggleTheme}},[n("v-icon",{attrs:{dark:"",large:""}},[e._v(" "+e._s(e.mdiThemeLightDark)+" ")])],1)],1),n("router-view")],1)],1)],1)},O=[],y=n("94ed"),P=n("b7d7"),j=b["a"].extend({name:"App",data:function(){return{mdiThemeLightDark:y["a"]}},methods:{toggleTheme:function(){var e=_.resolve(h["IApplicationConfigRepositoryToken"]);e.config$.pipe(Object(P["a"])(1)).subscribe((function(t){e.changeConfig(Object(s["a"])(Object(s["a"])({},t),{},{darkTheme:!t.darkTheme}))}))}}}),w=j,C=n("2877"),T=n("6544"),I=n.n(T),S=n("7496"),V=n("8336"),M=n("a523"),k=n("132d"),A=n("f6c4"),F=Object(C["a"])(w,g,O,!1,null,null,null),L=F.exports;I()(F,{VApp:S["a"],VBtn:V["a"],VContainer:M["a"],VIcon:k["a"],VMain:A["a"]});var x=n("8c4f"),$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",{attrs:{cols:8}},[n("create-post-form",{attrs:{"on-submit":e.onSubmitHandler}}),n("PostViewsList",{attrs:{"post-views":e.postViews}})],1),n("v-col",{attrs:{cols:4}},[n("h3",{staticClass:"mb-4"},[e._v("Самые обсуждаемые посты")]),n("most-discussed-posts-list",{attrs:{list:e.mostDiscussedPostViews}})],1)],1)},D=[],N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"post-views-list"},[e.postViews.length?e._l(e.postViews,(function(e){return n("post-view",{key:e.id,attrs:{"post-view":e}})})):n("v-alert",{attrs:{outlined:"",type:"info"}},[e._v(" Опубликуйте ваш первый пост ")])],2)},R=[],E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"post-view"},[n("post-view-card",{attrs:{"post-view":e.postView}}),n("div",{staticClass:"post-view--comment-area"},e._l(e.postView.comments,(function(e){return n("post-view-comment",{key:e.id,attrs:{"comment-view":e}})})),1)],1)},G=[],K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"post-view-card",attrs:{outlined:""}},[e.postView.image?n("v-img",{staticClass:"post-view-card--image",attrs:{src:e.postView.image}}):e._e(),n("v-card-text",{staticClass:"post-view-card--post-container"},[n("div",{staticClass:"post-view-card--avatar-container"},[n("AuthorAvatar",{attrs:{author:e.postView.author}})],1),n("div",{staticClass:"post-view-card--content-container"},[n("span",{staticClass:"post-view-card--create-date"},[e._v(" "+e._s(e._f("toLocalDateTime")(e.postView.createDate))+" ")]),e._v(" "+e._s(e.postView.content)+" ")])])],1)},Y=[],B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,i=t.attrs;return[n("v-avatar",e._g(e._b({attrs:{size:e.avatarSize}},"v-avatar",i,!1),o),[n("img",{attrs:{src:e.author.avatar,alt:e.author.fullname}})])]}}])},[n("span",[e._v(e._s(e.author.fullname))])])},J=[],H=(n("c96a"),b["a"].extend({name:"AuthorAvatar",props:{author:{type:Object,required:!0},small:{type:Boolean,required:!1,default:!1}},computed:{avatarSize:function(){return this.small?46:84}}})),U=H,q=n("8212"),X=n("3a2f"),z=Object(C["a"])(U,B,J,!1,null,null,null),Q=z.exports;I()(z,{VAvatar:q["a"],VTooltip:X["a"]});var W=b["a"].extend({name:"PostViewCard",props:{postView:Object},components:{AuthorAvatar:Q}}),Z=W,ee=(n("a82a"),n("b0af")),te=n("99d9"),ne=n("adda"),oe=Object(C["a"])(Z,K,Y,!1,null,null,null),ie=oe.exports;I()(oe,{VCard:ee["a"],VCardText:te["a"],VImg:ne["a"]});var re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"post-view-comment",attrs:{flat:""}},[n("v-card-text",{staticClass:"post-view-comment--post-container"},[n("div",{staticClass:"post-view-comment--avatar-container"},[n("AuthorAvatar",{attrs:{author:e.commentView.author,small:""}})],1),n("div",{staticClass:"post-view-comment--content-container"},[n("span",{staticClass:"post-view-comment--create-date"},[e._v(" "+e._s(e._f("toLocalDateTime")(e.commentView.createDate))+" ")]),e._v(" "+e._s(e.commentView.content)+" ")])])],1)},se=[],ae=b["a"].extend({name:"PostViewComment",props:{commentView:Object},components:{AuthorAvatar:Q}}),ce=ae,ue=(n("e469"),Object(C["a"])(ce,re,se,!1,null,null,null)),fe=ue.exports;I()(ue,{VCard:ee["a"],VCardText:te["a"]});var le=b["a"].extend({name:"PostView",props:{postView:Object},components:{PostViewCard:ie,PostViewComment:fe}}),de=le,pe=(n("af1d"),Object(C["a"])(de,E,G,!1,null,null,null)),ve=pe.exports,me=b["a"].extend({name:"PostViewsList",props:{postViews:Array},components:{PostView:ve}}),_e=me,he=n("0798"),be=Object(C["a"])(_e,N,R,!1,null,null,null),ge=be.exports;I()(be,{VAlert:he["a"]});var Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"most-discussed-posts-list"},[e.list.length?n("v-list",{attrs:{"two-line":""}},e._l(e.list,(function(t){return n("v-list-item",{key:t.id},[n("v-list-item-avatar",{staticClass:"justify-center text--white",attrs:{color:"accent"}},[e._v(" "+e._s(t.commentsCount)+" ")]),n("v-list-item-content",{staticClass:"text-break"},[e._v(" "+e._s(t.content)+" ")])],1)})),1):n("v-alert",{attrs:{outlined:"",type:"info"}},[e._v(" Пока нет обсуждений ")])],1)},ye=[],Pe=b["a"].extend({name:"MostDiscussedPostsList",props:{list:{type:Array,required:!0}}}),je=Pe,we=n("8860"),Ce=n("da13"),Te=n("8270"),Ie=n("5d23"),Se=Object(C["a"])(je,Oe,ye,!1,null,null,null),Ve=Se.exports;I()(Se,{VAlert:he["a"],VList:we["a"],VListItem:Ce["a"],VListItemAvatar:Te["a"],VListItemContent:Ie["a"]});var Me=n("2102"),ke=b["a"].extend({name:"Home",subscriptions:function(){return{postViews:_.resolve(h["IPostFeedServiceToken"]).postViews$,mostDiscussedPostViews:_.resolve(h["IMostDiscussedPostFeedServiceToken"]).mostDiscussedPostViews$}},methods:{onSubmitHandler:function(e){return _.resolve(h["IPostFeedServiceToken"]).createPost(e)}},components:{PostViewsList:ge,MostDiscussedPostsList:Ve,CreatePostForm:Me["CreatePostForm"]}}),Ae=ke,Fe=n("62ad"),Le=n("0fd9"),xe=Object(C["a"])(Ae,$,D,!1,null,null,null),$e=xe.exports;I()(xe,{VCol:Fe["a"],VRow:Le["a"]}),b["a"].use(x["a"]);var De=[{path:"/",name:"Home",component:$e}],Ne=new x["a"]({mode:"history",base:"/tasty-twitter/",routes:De}),Re=Ne,Ee=n("f309"),Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return b["a"].use(Ee["a"]),new Ee["a"]({theme:{dark:e}})},Ke=n("ce19");n("4de4");b["a"].filter("toLocalDateTime",h["toLocalDateTime"]);var Ye=n("d263");b["a"].use(Ke["a"]),b["a"].config.productionTip=!1;var Be=_.resolve(h["IApplicationConfigRepositoryToken"]);Be.config$.pipe(Object(P["a"])(1)).subscribe((function(e){var t=e.darkTheme,n=new b["a"]({vuetify:Ge(t),router:Re,render:function(e){return e(L)}});Be.config$.pipe(Object(Ye["a"])(1)).subscribe((function(e){var t=e.darkTheme;n.$vuetify.theme.dark=t})),n.$mount("#app")}))},f9fc:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n("29b4"),t),i(n("a045"),t)}});
//# sourceMappingURL=main.b084959e.js.map